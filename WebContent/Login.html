<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<title>Login</title>
</head>
<body>
	<h1>Login</h1>
    <form>
        <label>Username:</label>
        <input type="text" name="username" id="username"/><br>
   		<label>Password:</label>
        <input type="password" name="password" id="password"/><br>
        <button type="button" onclick="logIn()">Login</button>
    </form>
    <script>
    	function $(id){
        	return document.getElementById(id);
		}    
    	function logIn(){
        	var data = {
            	username: $('username').value,
            	password: $('password').value
            	};
        	console.log(data)
         	let config = {
              	method: 'POST',
              	body: JSON.stringify(data),
              	credentials: 'same-origin'
          	};
           	fetch("\Login", config)
               	.then(function(response){
                   	return response.json();
               	})
               	.then(function(data){
                   	console.log(data);
                   	if(data.redirect != null && data.redirect != undefined){
                   		//Almacenar en sessionStorage
                   		sessionStorage.setItem("name",data.username);
                   		window.location.href = data.redirect;
                   	}
               	})
               	.catch((e) => {
               		console.log(e)
               	})
    	}
    </script>
</body>
</html>